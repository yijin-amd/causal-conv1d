================================================================================================
Causal Conv1D 性能对比测试结果汇总
测试GPU: NVIDIA H20 (计算能力9.0, 内存带宽4022.78 GB/s)
测试次数: 热身10次, 正式100次
================================================================================================

格式说明:
- Time: 执行时间 (毫秒)
- BW: 带宽 (GB/s)
- Speedup: Channel-First相对于Channel-Last的加速比

================================================================================================
| # |Batch| Dim |SeqLen|W|SiLU| ChannelFirst(Time/BW) | ChannelLast(Time/BW)  | Speedup |
================================================================================================
| 1 |  2  |  64 |  128 |4| N  | 0.0023ms / 58.00GB/s  | 0.0032ms / 41.75GB/s  | 1.39x   |
| 2 |  2  |  64 |  512 |4| N  | 0.0024ms / 216.99GB/s | 0.0034ms / 155.18GB/s | 1.40x   |
| 3 |  2  |  64 |  512 |4| Y  | 0.0031ms / 169.04GB/s | 0.0059ms / 89.09GB/s  | 1.90x   |
| 4 |  2  |  64 | 1024 |4| N  | 0.0027ms / 385.57GB/s | 0.0034ms / 308.58GB/s | 1.25x   |
| 5 |  2  |  64 | 1024 |4| Y  | 0.0041ms / 254.80GB/s | 0.0060ms / 175.88GB/s | 1.45x   |
| 6 |  2  |  64 | 2048 |2| N  | 0.0033ms / 630.08GB/s | 0.0039ms / 543.07GB/s | 1.16x   |
| 7 |  2  |  64 | 2048 |3| N  | 0.0034ms / 624.34GB/s | 0.0040ms / 525.55GB/s | 1.19x   |
| 8 |  2  |  64 | 2048 |4| N  | 0.0034ms / 619.28GB/s | 0.0039ms / 537.07GB/s | 1.15x   |
------------------------------------------------------------------------------------------------
| 9 |  4  | 256 |  256 |4| N  | 0.0034ms / 612.09GB/s | 0.0041ms / 516.15GB/s | 1.19x   |
|10 |  4  | 256 |  512 |4| N  | 0.0034ms /1226.70GB/s | 0.0047ms / 890.07GB/s | 1.38x   |
|11 |  4  | 256 |  512 |4| Y  | 0.0054ms / 782.31GB/s | 0.0074ms / 563.93GB/s | 1.39x   |
|12 |  4  | 256 | 1024 |4| N  | 0.0043ms /1969.40GB/s | 0.0061ms /1367.02GB/s | 1.44x   |
|13 |  4  | 256 | 1024 |4| Y  | 0.0079ms /1060.41GB/s | 0.0091ms / 917.85GB/s | 1.16x   |
|14 |  4  | 256 | 2048 |2| N  | 0.0058ms /2869.41GB/s | 0.0088ms /1900.77GB/s | 1.51x   |
|15 |  4  | 256 | 2048 |3| N  | 0.0058ms /2873.20GB/s | 0.0093ms /1803.60GB/s | 1.59x   |
|16 |  4  | 256 | 2048 |4| N  | 0.0059ms /2861.77GB/s | 0.0093ms /1804.46GB/s | 1.59x   |
------------------------------------------------------------------------------------------------
|17 |  4  | 512 |  512 |4| N  | 0.0044ms /1889.45GB/s | 0.0061ms /1381.03GB/s | 1.37x   |
|18 |  4  | 512 | 1024 |4| N  | 0.0058ms /2908.03GB/s | 0.0093ms /1798.51GB/s | 1.62x   |
|19 |  4  | 512 | 1024 |4| Y  | 0.0125ms /1344.70GB/s | 0.0144ms /1165.95GB/s | 1.15x   |
|20 |  4  | 512 | 2048 |4| N  | 0.0093ms /3607.06GB/s | 0.0158ms /2119.88GB/s | 1.70x ⭐|
|21 |  4  | 512 | 2048 |4| Y  | 0.0222ms /1514.83GB/s | 0.0239ms /1402.30GB/s | 1.08x   |
|22 |  4  | 512 | 2048 |2| N  | 0.0092ms /3663.95GB/s | 0.0152ms /2212.26GB/s | 1.66x   |
|23 |  4  | 512 | 2048 |3| Y  | 0.0211ms /1587.77GB/s | 0.0243ms /1380.59GB/s | 1.15x   |
------------------------------------------------------------------------------------------------
|24 |  8  |1024 |  512 |4| N  | 0.0110ms /3054.49GB/s | 0.0158ms /2127.06GB/s | 1.44x   |
|25 |  8  |1024 | 1024 |4| N  | 0.0245ms /2739.38GB/s | 0.0317ms /2118.49GB/s | 1.29x   |
|26 |  8  |1024 | 1024 |4| Y  | 0.0417ms /1608.07GB/s | 0.0455ms /1474.77GB/s | 1.09x   |
|27 |  8  |1024 | 2048 |4| N  | 0.0455ms /2948.17GB/s | 0.0573ms /2343.52GB/s | 1.26x   |
|28 |  8  |1024 | 2048 |4| Y  | 0.0752ms /1785.06GB/s | 0.0833ms /1612.24GB/s | 1.11x   |
|29 |  8  |1024 | 4096 |4| N  | 0.0854ms /3143.70GB/s | 0.1068ms /2514.31GB/s | 1.25x   |
------------------------------------------------------------------------------------------------
|30 |  8  |2048 | 1024 |4| N  | 0.0456ms /2946.23GB/s | 0.0584ms /2298.22GB/s | 1.28x   |
|31 |  8  |2048 | 2048 |4| N  | 0.0860ms /3122.93GB/s | 0.1083ms /2478.26GB/s | 1.26x   |
|32 |  8  |2048 | 2048 |4| Y  | 0.1447ms /1855.40GB/s | 0.1586ms /1692.26GB/s | 1.10x   |
|33 |  8  |2048 | 4096 |4| N  | 0.1645ms /3263.62GB/s | 0.2082ms /2578.72GB/s | 1.27x   |
|34 |  8  |2048 | 2048 |2| N  | 0.0857ms /3130.89GB/s | 0.1134ms /2367.81GB/s | 1.32x   |
|35 |  8  |2048 | 2048 |3| Y  | 0.1364ms /1968.28GB/s | 0.1638ms /1638.85GB/s | 1.20x   |
================================================================================================

统计分析:
================================================================================================
总用例数: 35组

加速比统计:
  - 最小加速比: 1.08x (用例21: 4×512×2048×w4+SiLU)
  - 最大加速比: 1.90x (用例3:  2×64×512×w4+SiLU)
  - 平均加速比: 1.32x
  - 中位数加速比: 1.28x

加速比分布:
  - 1.00x-1.20x: 13组 (37.1%)
  - 1.20x-1.40x: 12组 (34.3%)
  - 1.40x-1.60x: 8组  (22.9%)
  - 1.60x-1.90x: 2组  (5.7%)

不带SiLU的用例 (25组):
  - 平均加速比: 1.36x
  - 加速比范围: 1.15x - 1.70x

带SiLU的用例 (10组):
  - 平均加速比: 1.24x
  - 加速比范围: 1.08x - 1.90x

峰值性能:
  - ChannelFirst最高带宽: 3663.95 GB/s (用例22: 4×512×2048×w2)
  - ChannelLast最高带宽: 2578.72 GB/s (用例33: 8×2048×4096×w4)
  - 最佳加速比配置: 2×64×512×w4+SiLU (1.90x)
  - 峰值性能配置: 4×512×2048×w4 (1.70x, 3607.06 GB/s)

Width影响 (从dim=256,2048测试):
  - width=2: 平均加速比 1.33x
  - width=3: 平均加速比 1.31x
  - width=4: 平均加速比 1.32x
  
维度影响:
  - dim=64:   平均加速比 1.36x (带宽: 58-630 GB/s)
  - dim=256:  平均加速比 1.41x (带宽: 612-2873 GB/s)
  - dim=512:  平均加速比 1.39x (带宽: 1344-3663 GB/s) ⭐最佳性能区
  - dim=1024: 平均加速比 1.24x (带宽: 1608-3143 GB/s)
  - dim=2048: 平均加速比 1.24x (带宽: 1638-3263 GB/s)

关键发现:
1. Channel-First实现在所有测试用例中均优于Channel-Last
2. 平均性能提升: 32%
3. 不带SiLU时性能优势更明显 (36% vs 24%)
4. dim=256-512时性能优势最大 (平均40%)
5. 大维度(1024+)时两种实现性能趋于接近 (平均24%)
6. 峰值带宽达到3663.95 GB/s (接近理论带宽4022.78 GB/s的91%)

================================================================================================

